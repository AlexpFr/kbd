<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
		<title>The Linux keyboard and console HOWTO: The keyboard LEDs</title>
	</head>
	<body class="container">
		<nav>
			<ul class="pager">
				<li class="previous"><a href="kbd-9.html">Previous</a></li>
				<li class="next"><a href="kbd-11.html">Next</a></li>
			</ul>
		</nav>

		<div class="page-header">
			<h2><a name="s10">The keyboard LEDs</a></h2>
		</div>

		<p>1. There are per-tty keyboard flags:
		each VC has its own NumLock, CapsLock, ScrollLock.
		By default these keyboard flags are shown in the LEDs.
		The usual way to change them is by pressing the corresponding key.
		(Side remark: pressing the NumLock key when in application key mode
		will not change the NumLock status, but produce an escape sequence.
		If you want the NumLock key to always change the Numlock status,
		bind it to Bare_Num_Lock.)</p>

		<p>2. Next, there are per-tty default keyboard flags,
		to initialize the keyboard flags when a reset occurs.
		Thus if you want NumLock on all the time, that is possible.
		The usual way to change them is by `<code>setleds -D</code> ...'.</p>

		<p>3. There is the possibility that the leds do not reflect
		the keyboard flags, but something else.</p>

		<p>3A. This something else can be three bits somewhere in the kernel -
		which can be used if you want to monitor some hardware or software
		status bit(s). If you want this, edit the kernel source to call
		<code>register_leds()</code> somewhere.</p>

		<p>3B. This something else can also be whatever some user program wants
		to show in the LEDs. Thus, people who like such things can make
		nice patterns of lights. If you want this, use the KDSETLED ioctl.</p>

		<p>This latter use is not per-tty, but the choice between former
		and latter use is per-tty.</p>

		<p>Summarizing: Each tty has a flag <code>kbd->ledmode</code>.
		If this has the value LED_SHOW_FLAGS then the keyboard flags
		(NumLock etc.) of that tty are shown.
		If this has the value LED_SHOW_MEM then three selected memory
		addresses are shown.
		If this has the value LED_SHOW_IOCTL then the leds show whatever
		value was last assigned to them using the KDSETLED ioctl.</p>

		<p>One may add that X uses ioctl's to set the LEDs, but fails
		to reset its VT when it exits, so after using X there may
		be one VT that is not in the default LED_SHOW_FLAGS state.
		This can be fixed by doing `<code>setleds -L</code>' on that VT.
		See setleds(1).</p>

		<hr/>
		<nav>
			<ul class="pager">
				<li class="previous"><a href="kbd-9.html">Previous</a></li>
				<li class="next"><a href="kbd-11.html">Next</a></li>
			</ul>
		</nav>
	</body>
</html>
